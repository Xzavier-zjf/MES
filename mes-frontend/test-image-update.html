<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾ç‰‡æ›´æ–°åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f7fa;
        }

        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .step {
            background: #f0f9ff;
            padding: 15px;
            border-left: 4px solid #409eff;
            margin: 10px 0;
        }

        .button {
            background: #409eff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            text-decoration: none;
            display: inline-block;
        }

        .button:hover {
            background: #66b1ff;
        }

        .success {
            color: #52c41a;
            font-weight: bold;
        }

        .warning {
            color: #faad14;
            font-weight: bold;
        }

        .error {
            color: #ff4d4f;
            font-weight: bold;
        }

        .test-urls {
            background: #f6ffed;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }

        .url-item {
            margin: 8px 0;
            padding: 8px;
            background: white;
            border-radius: 4px;
            border: 1px solid #d9f7be;
        }

        .url-link {
            color: #1890ff;
            cursor: pointer;
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <div class="test-section">
        <h1>ğŸ”„ å›¾ç‰‡æ›´æ–°åŠŸèƒ½æµ‹è¯•</h1>
        <p>æµ‹è¯•å›¾æ¡ˆç®¡ç†é¡µé¢ä¸­ç¼–è¾‘å›¾æ¡ˆæ—¶æ›´æ¢å›¾ç‰‡çš„åŠŸèƒ½</p>
    </div>

    <div class="test-section">
        <h2>ğŸ¯ æµ‹è¯•ç›®æ ‡</h2>
        <ul>
            <li>âœ… ç¼–è¾‘ç°æœ‰å›¾æ¡ˆæ—¶èƒ½æ­£ç¡®æ›´æ¢å›¾ç‰‡URL</li>
            <li>âœ… ä¿å­˜åæœ¬åœ°æ•°æ®ç«‹å³æ›´æ–°</li>
            <li>âœ… åˆ·æ–°é¡µé¢åæ˜¾ç¤ºæ–°çš„å›¾ç‰‡</li>
            <li>âœ… å¤„ç†å„ç§URLæ ¼å¼ï¼ˆHTTP/HTTPS/ç›¸å¯¹è·¯å¾„ï¼‰</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ğŸ“‹ æµ‹è¯•æ­¥éª¤</h2>

        <div class="step">
            <strong>æ­¥éª¤1:</strong> å‡†å¤‡æµ‹è¯•å›¾ç‰‡URL
            <div class="test-urls">
                <h4>ğŸ–¼ï¸ æ¨èæµ‹è¯•å›¾ç‰‡URLï¼š</h4>
                <div class="url-item">
                    <strong>éšæœºå›¾ç‰‡1:</strong><br>
                    <span class="url-link" onclick="copyUrl('https://picsum.photos/300/200?random=1')">
                        https://picsum.photos/300/200?random=1
                    </span>
                </div>
                <div class="url-item">
                    <strong>éšæœºå›¾ç‰‡2:</strong><br>
                    <span class="url-link" onclick="copyUrl('https://picsum.photos/300/200?random=2')">
                        https://picsum.photos/300/200?random=2
                    </span>
                </div>
                <div class="url-item">
                    <strong>å ä½å›¾ç‰‡:</strong><br>
                    <span class="url-link"
                        onclick="copyUrl('https://via.placeholder.com/300x200/67C23A/FFFFFF?text=Updated+Image')">
                        https://via.placeholder.com/300x200/67C23A/FFFFFF?text=Updated+Image
                    </span>
                </div>
                <div class="url-item">
                    <strong>æµ‹è¯•å›¾ç‰‡:</strong><br>
                    <span class="url-link" onclick="copyUrl('https://httpbin.org/image/png')">
                        https://httpbin.org/image/png
                    </span>
                </div>
            </div>
        </div>

        <div class="step">
            <strong>æ­¥éª¤2:</strong> æ‰“å¼€å›¾æ¡ˆç®¡ç†é¡µé¢
            <br>
            <a href="/pattern" target="_blank" class="button">æ‰“å¼€å›¾æ¡ˆç®¡ç†é¡µé¢</a>
        </div>

        <div class="step">
            <strong>æ­¥éª¤3:</strong> é€‰æ‹©ä¸€ä¸ªç°æœ‰å›¾æ¡ˆè¿›è¡Œç¼–è¾‘
            <br>
            <span class="warning">âš ï¸ ç‚¹å‡»ä»»æ„å›¾æ¡ˆè¡Œçš„"ç¼–è¾‘"æŒ‰é’®</span>
        </div>

        <div class="step">
            <strong>æ­¥éª¤4:</strong> åœ¨ç¼–è¾‘å¯¹è¯æ¡†ä¸­æ›´æ¢å›¾ç‰‡
            <br>
            <ol>
                <li>é€‰æ‹©"å›¾ç‰‡URL"ä¸Šä¼ æ–¹å¼</li>
                <li>ç²˜è´´ä¸Šé¢å¤åˆ¶çš„æµ‹è¯•URL</li>
                <li>ç¡®è®¤é¢„è§ˆå›¾ç‰‡æ­£ç¡®æ˜¾ç¤º</li>
                <li>ç‚¹å‡»"ä¿å­˜"æŒ‰é’®</li>
            </ol>
        </div>

        <div class="step">
            <strong>æ­¥éª¤5:</strong> éªŒè¯æ›´æ–°æ•ˆæœ
            <br>
            <ol>
                <li>æ£€æŸ¥è¡¨æ ¼ä¸­çš„å›¾ç‰‡æ˜¯å¦ç«‹å³æ›´æ–°</li>
                <li>åˆ·æ–°é¡µé¢ï¼Œç¡®è®¤å›¾ç‰‡ä»ç„¶æ˜¯æ–°çš„</li>
                <li>æŸ¥çœ‹æ§åˆ¶å°ï¼Œç¡®è®¤æ²¡æœ‰500é”™è¯¯</li>
            </ol>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ ä¿®å¤å†…å®¹</h2>
        <ul>
            <li>âœ… <strong>æœ¬åœ°æ•°æ®åŒæ­¥:</strong> ä¿å­˜åç«‹å³æ›´æ–°æœ¬åœ°å›¾æ¡ˆåˆ—è¡¨</li>
            <li>âœ… <strong>æ•°æ®åˆ·æ–°:</strong> ä¿å­˜æˆåŠŸåè‡ªåŠ¨åˆ·æ–°æ•°æ®</li>
            <li>âœ… <strong>URLå¤„ç†ä¼˜åŒ–:</strong> æ”¹è¿›å›¾ç‰‡URLçš„å¤„ç†é€»è¾‘</li>
            <li>âœ… <strong>å ä½ç¬¦æ˜¾ç¤º:</strong> æ— æ•ˆå›¾ç‰‡æ˜¾ç¤ºç¾è§‚çš„å ä½ç¬¦</li>
            <li>âœ… <strong>è°ƒè¯•ä¿¡æ¯:</strong> æ·»åŠ è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ğŸ› é—®é¢˜æ’æŸ¥</h2>
        <p>å¦‚æœå›¾ç‰‡æ›´æ–°ä»ç„¶æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š</p>

        <div class="step">
            <strong>æ§åˆ¶å°æ—¥å¿—:</strong>
            <ul>
                <li>åº”è¯¥çœ‹åˆ°"æœ¬åœ°æ•°æ®å·²æ›´æ–°: [å¯¹è±¡]"</li>
                <li>åº”è¯¥çœ‹åˆ°"ç¼–è¾‘æˆåŠŸ"</li>
                <li>ä¸åº”è¯¥æœ‰500é”™è¯¯ï¼ˆå·²é€šè¿‡å ä½ç¬¦è§£å†³ï¼‰</li>
            </ul>
        </div>

        <div class="step">
            <strong>ç½‘ç»œè¯·æ±‚:</strong>
            <ul>
                <li>ä¿å­˜è¯·æ±‚åº”è¯¥è¿”å›æˆåŠŸçŠ¶æ€</li>
                <li>åˆ·æ–°åçš„æ•°æ®è¯·æ±‚åº”è¯¥åŒ…å«æ–°çš„å›¾ç‰‡URL</li>
            </ul>
        </div>

        <div class="step">
            <strong>æ•°æ®éªŒè¯:</strong>
            <ul>
                <li>æ£€æŸ¥æ•°æ®åº“ä¸­çš„å›¾ç‰‡URLæ˜¯å¦å·²æ›´æ–°</li>
                <li>ç¡®è®¤å‰ç«¯æ¥æ”¶åˆ°çš„æ•°æ®åŒ…å«æ–°URL</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ® å¿«é€Ÿæµ‹è¯•</h2>
        <button class="button" onclick="autoTest()">è‡ªåŠ¨è®¾ç½®æµ‹è¯•URL</button>
        <button class="button" onclick="openPatternManager()">æ‰“å¼€å›¾æ¡ˆç®¡ç†</button>
        <button class="button" onclick="showDebugInfo()">æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯</button>

        <div id="testResult" style="margin-top: 15px;"></div>
    </div>

    <script>
        function copyUrl(url) {
            navigator.clipboard.writeText(url).then(() => {
                document.getElementById('testResult').innerHTML = `
                    <div style="background: #f0f9ff; padding: 10px; border-radius: 4px;">
                        <span class="success">âœ… URLå·²å¤åˆ¶åˆ°å‰ªè´´æ¿:</span><br>
                        ${url}
                    </div>
                `;
            }).catch(() => {
                // å¤‡ç”¨æ–¹æ³•
                const textArea = document.createElement('textarea');
                textArea.value = url;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);

                document.getElementById('testResult').innerHTML = `
                    <div style="background: #f0f9ff; padding: 10px; border-radius: 4px;">
                        <span class="success">âœ… URLå·²å¤åˆ¶:</span><br>
                        ${url}
                    </div>
                `;
            });
        }

        function autoTest() {
            const testUrl = 'https://picsum.photos/300/200?random=' + Math.floor(Math.random() * 1000);
            copyUrl(testUrl);

            setTimeout(() => {
                document.getElementById('testResult').innerHTML += `
                    <div style="background: #fff2e8; padding: 10px; border-radius: 4px; margin-top: 10px;">
                        <strong>ğŸ“‹ æµ‹è¯•æŒ‡å—:</strong><br>
                        1. URLå·²å¤åˆ¶ï¼Œç°åœ¨æ‰“å¼€å›¾æ¡ˆç®¡ç†é¡µé¢<br>
                        2. ç‚¹å‡»ä»»æ„å›¾æ¡ˆçš„"ç¼–è¾‘"æŒ‰é’®<br>
                        3. é€‰æ‹©"å›¾ç‰‡URL"æ–¹å¼<br>
                        4. ç²˜è´´URLå¹¶ä¿å­˜<br>
                        5. è§‚å¯Ÿå›¾ç‰‡æ˜¯å¦ç«‹å³æ›´æ–°
                    </div>
                `;
            }, 1000);
        }

        function openPatternManager() {
            window.open('/pattern', '_blank');
        }

        function showDebugInfo() {
            document.getElementById('testResult').innerHTML = `
                <div style="background: #f5f5f5; padding: 15px; border-radius: 4px; font-family: monospace; font-size: 12px;">
                    <strong>ğŸ” è°ƒè¯•æ£€æŸ¥æ¸…å•:</strong><br><br>
                    <strong>ä¿å­˜æ—¶åº”è¯¥çœ‹åˆ°çš„æ—¥å¿—:</strong><br>
                    âœ“ "ä¿å­˜å›¾æ¡ˆæ•°æ®: Proxy(Object) {...}"<br>
                    âœ“ "è¯·æ±‚æ•°æ®: {...}"<br>
                    âœ“ "æ‰§è¡Œç¼–è¾‘æ“ä½œï¼ŒID: [æ•°å­—]"<br>
                    âœ“ "æœ¬åœ°æ•°æ®å·²æ›´æ–°: {...}"<br>
                    âœ“ "ç¼–è¾‘æˆåŠŸ"<br><br>
                    
                    <strong>ä¸åº”è¯¥çœ‹åˆ°çš„é”™è¯¯:</strong><br>
                    âœ— "GET .../uploads/patterns/... 500 (Internal Server Error)"<br>
                    âœ— "ä¿å­˜å¤±è´¥: ..."<br><br>
                    
                    <strong>é¡µé¢è¡Œä¸º:</strong><br>
                    âœ“ å¯¹è¯æ¡†å…³é—­<br>
                    âœ“ è¡¨æ ¼ä¸­çš„å›¾ç‰‡ç«‹å³æ›´æ–°æˆ–æ˜¾ç¤ºå ä½ç¬¦<br>
                    âœ“ åˆ·æ–°é¡µé¢åæ•°æ®ä¿æŒæ›´æ–°çŠ¶æ€
                </div>
            `;
        }

        // é¡µé¢åŠ è½½æ—¶çš„æç¤º
        document.addEventListener('DOMContentLoaded', function () {
            console.log('ğŸ”„ å›¾ç‰‡æ›´æ–°åŠŸèƒ½æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('è¯·æŒ‰ç…§æ­¥éª¤è¿›è¡Œæµ‹è¯•ï¼ŒéªŒè¯å›¾ç‰‡æ›´æ–°åŠŸèƒ½');
        });
    </script>
</body>

</html>