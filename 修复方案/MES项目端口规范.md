# MES项目端口规范

## 端口分配规则
采用统一的端口号段，便于管理和记忆：
- **8080**: 网关服务 (Gateway)
- **810x**: 微服务端口段 (x为服务编号)

## 具体端口分配

### 基础设施服务
| 服务名称 | 端口 | 说明 |
|---------|------|------|
| Gateway (网关) | 8080 | 统一入口，所有外部请求通过此端口 |
| Nacos | 8848 | 服务注册与发现中心 |

### 业务微服务
| 服务名称 | 端口 | 服务标识 | 说明 |
|---------|------|----------|------|
| 认证服务 (auth-service) | 8101 | 01 | 用户认证与授权 |
| 设备服务 (service-equipment) | 8102 | 02 | 设备管理与监控 |
| 工艺服务 (service-process) | 8103 | 03 | 工艺参数与流程管理 |
| 生产服务 (service-production) | 8104 | 04 | 生产计划与任务管理 |

### 前端应用
| 应用名称 | 端口 | 说明 |
|---------|------|------|
| 前端应用 | 5173 | Vue.js开发服务器端口 |

## 端口变更记录

### 原端口配置
- 网关：未配置 → **8080**
- 认证服务：8001 → **8101**
- 设备服务：8000 → **8102**
- 工艺服务：7000 → **8103**
- 生产服务：9000 → **8104**

## 访问方式

### 直接访问微服务
- 认证服务：http://localhost:8101
- 设备服务：http://localhost:8102
- 工艺服务：http://localhost:8103
- 生产服务：http://localhost:8104

### 通过网关访问 (推荐)
- 网关入口：http://localhost:8080
- 认证接口：http://localhost:8080/auth/**
- 设备接口：http://localhost:8080/api/v1/equipment/**
- 工艺接口：http://localhost:8080/api/v1/process/**
- 生产接口：http://localhost:8080/api/v1/production/**

## 端口规范优势

1. **统一性**: 所有微服务使用810x端口段，便于识别
2. **有序性**: 按服务重要性和启动顺序分配端口号
3. **可扩展性**: 预留810x端口段，便于后续添加新服务
4. **易记性**: 规律性的端口分配，便于开发和运维记忆
5. **标准化**: 符合微服务架构的端口管理最佳实践

## 注意事项

1. **防火墙配置**: 确保相关端口在防火墙中已开放
2. **端口冲突**: 启动前检查端口是否被其他应用占用
3. **负载均衡**: 生产环境可能需要配置负载均衡器
4. **监控配置**: 更新监控系统中的端口配置
5. **文档同步**: 确保API文档中的端口信息已更新

## 启动顺序建议

1. **Nacos** (8848) - 服务注册中心
2. **认证服务** (8101) - 基础认证服务
3. **设备服务** (8102) - 设备管理
4. **工艺服务** (8103) - 工艺管理
5. **生产服务** (8104) - 生产管理
6. **网关服务** (8080) - 统一入口
7. **前端应用** (5173) - 用户界面

## 健康检查端点

所有服务都提供健康检查端点：
- http://localhost:810x/actuator/health (如果启用了Spring Boot Actuator)
- 可用于负载均衡器和监控系统的健康检查